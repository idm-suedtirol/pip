<div>
	<div ng-init="getUser()" class="container">
		<div ng-show="warning!=undefined" class="alert alert-warning">{{warning}}
			<button type="button" class="close" ng-click="warning=undefined"><span aria-hidden="true">&times;</span></button>
		</div>
		<form class="form-inline" ng-init="user = {organizations:[],name:''}" ng-submit="createUser()">
			<div class="form-group">
				<label class="sr-only">Name</label> 
				<input ng-model="user.email" type="email" class="form-control" placeholder="Email" required="required">
			</div>
			<div ng-if="isAdmin" class="form-group" ng-init="getOrganisations()">
				<label class="sr-only">Organisation</label>
				 
				<select ng-model="user.organizations[0]" class="form-control" required="required">
					<option  ng-repeat="org in organisations|orderBy:'name'">{{org.name}}</option>
				</select>
			</div>
			<button type="submit" class="btn btn-default" style="background-color:{{newTopic.color}}">Create new user</button>
		</form>
		<div class="table-responsive">
			<table class="table">
				<thead>
					<tr>
						<th>Email</th>
						<th ng-show="isAdmin">Role</th>
						<th ng-show="isAdmin" >Organisation</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="user in users | filter:textFilter | orderBy: 'email'">
						<td>{{user.email}}</td>
						<td>
							<div ng-show="isAdmin && user.role!='ADMIN'">
								{{user.role}}
								<a href="javascript:void(0)" ng-click="promote(user.email)" ng-show="{{user.role=='USER'}}" class="glyphicon glyphicon-chevron-up"></a>
								<a href="javascript:void(0)" ng-click="demote(user.email)" ng-show="{{user.role=='MANAGER'}}"class="glyphicon glyphicon-chevron-down"></a>
							</div>
						</td>
						<td ng-show="isAdmin">
							<div ng-if="isAdmin" class="form-group"
								ng-init="getOrganisations()">
								<label class="sr-only">Organisation</label> 
								<select	ng-model="user.organizations[0]" ng-change="updateOrganisazion(user)" class="form-control" ng-options="org.name for org in organisations track by org.name">
								</select>
							</div>
						</td>
						<td><a ng-show="isManager" class="btn glyphicon glyphicon-remove"  confirmed-click="deleteUser(user.email)" ng-confirm-click="Are you sure you want to delete this user?" ></a></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>